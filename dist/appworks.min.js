/*! appworks-js 2016-08-25 copyright Jason Ibrahim */
var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},AWPlugin=function(){function a(a,b){this.successHandler=a,this.errorHandler=b}return a}(),Appworks;!function(a){var b=0,c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.authenticate=function(a){var b=this;a=!!a,cordova.exec(function(){return b.successHandler}(),function(){return b.errorHandler}(),"AWAuth","authenticate",[a.toString()])},b.prototype.getAuthResponse=function(){var a=this;cordova.exec(function(){return a.successHandler}(),function(){return a.errorHandler}(),"AWAuth","authobject",[])},b.prototype.gateway=function(a,b){cordova.exec(a,b,"AWAuth","gateway",[])},b}(AWPlugin);a.Auth=c;var d=function(a){function b(){a.call(this,null,null)}return __extends(b,a),b.prototype.hideKeyboardAccessoryBar=function(a){cordova.exec(function(){},function(){},"AWKeyboard","hideKeyboardAccessoryBar",[a.toString()])},b.prototype.close=function(){cordova.exec(function(){},function(){},"AWKeyboard","close",[])},b.prototype.show=function(){cordova.exec(function(){},function(){},"AWKeyboard","show",[])},b.prototype.disableScroll=function(a){a=!!a,cordova.exec(function(){},function(){},"AWKeyboard","disableScroll",[a.toString()])},b}(AWPlugin);a.AWKeyboard=d;var e=function(a){function b(){a.call(this,null,null)}return __extends(b,a),b.prototype.open=function(a,b,c){return cordova.InAppBrowser.open(a,b,c)},b}(AWPlugin);a.AWWebView=e;var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.closeActiveApp=function(){var a=this;cordova.exec(function(){return a.successHandler}(),function(){return a.errorHandler}(),"AWAppManager","closeActiveApp",[])},b}(AWPlugin);a.AWAppManager=f;var g=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.cleanup=function(a,b){navigator.camera.cleanup(a,b)},b.prototype.getPicture=function(a,b,c){navigator.camera.getPicture(a,b,c)},b.prototype.openGallery=function(a){var b=this;a=a||{destinationType:Camera.DestinationType.FILE_URI},a.sourceType=Camera.PictureSourceType.PHOTOLIBRARY,this.getPicture(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b.prototype.takePicture=function(a){var b=this;a=a||{destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG,mediaType:Camera.MediaType.ALLMEDIA,correctOrientation:!0,saveToPhotoAlbum:!0},a.sourceType=Camera.PictureSourceType.CAMERA,this.getPicture(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b}(AWPlugin);a.AWCamera=g;var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.open=function(a,b,c){cordova.exec(a,b,"AWComponent","open",c||[])},b.prototype.list=function(a,b,c){cordova.exec(a,b,"AWComponent","list",c||[])},b.prototype.check=function(a,b,c){cordova.exec(a,b,"AWComponent","check",c||[])},b.prototype.close=function(a,b,c){cordova.exec(a,b,"AWComponent","close",c||[])},b}(AWPlugin);a.AWComponent=h;var i=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.open=function(a,b){var c=this,d=[a,b];cordova.exec(function(){return c.successHandler}(),function(){return c.errorHandler}(),"AWFinder","open",d)},b.prototype.openDirect=function(a){var b=this;cordova.exec(function(){return b.successHandler}(),function(){return b.errorHandler}(),"AWFinder","openDirect",[a])},b.prototype.list=function(a){var b=this;cordova.exec(function(){return b.successHandler}(),function(){return b.errorHandler}(),"AWFinder","list",[a])},b}(AWPlugin);a.Finder=i;var j=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.selectAndUpload=function(a){var b=this,c=[a];cordova.exec(function(){return b.successHandler}(),function(){return b.errorHandler}(),"AWFileChooser","open",c)},b}(AWPlugin);a.FileChooser=j;var k=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setHeader=function(a){var b=this;a&&a.callback?(this.callback=a.callback,a.callback=!0):this.callback=null,cordova.exec(function(){return b.callback}(),function(){return b.errorHandler}(),"AWHeaderBar","setHeader",[a])},b.prototype.getHeader=function(){var a=this;cordova.exec(function(){return a.successHandler}(),function(){return a.errorHandler}(),"AWHeaderBar","getHeader",[])},b}(AWPlugin);a.AWHeaderBar=k;var l=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.push=function(a){var b=this,c=[a];cordova.exec(function(){return b.successHandler}(),function(){return b.errorHandler}(),"AWMenu","push",c)},b.prototype.openListener=function(a){var b=this;cordova.exec(a,function(){return b.errorHandler}(),"AWMenu","receive",[])},b}(AWPlugin);a.Menu=l;var m=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.scan=function(){var a=this;cordova.exec(function(){return a.successHandler}(),function(){return a.errorHandler}(),"AWQRCodeReader","scan",[])},b.prototype.rename=function(){var a=this;cordova.exec(function(){return a.successHandler}(),function(){return a.errorHandler}(),"AWQRCodeReader","rename",[])},b}(AWPlugin);a.QRReader=m;var n=function(a){function c(c,d){a.call(this,c,d),this.seqNo=++b,this.onprogress=null}return __extends(c,a),c.prototype.store=function(a,b,c){function d(a){var b=new ProgressEvent(null);return b.lengthComputable=a.lengthComputable,b.loaded=a.loaded,b.total=a.total,b}var e,f=this,g=[a,b,!1,this.seqNo,c&&c.headers],h=function(){return f.successHandler},i=this.onprogress;e=function(a){"undefined"!=typeof a.lengthComputable?i&&i(d(a)):h&&h()(a)},cordova.exec(e,function(){return f.errorHandler}(),"AWSecureStorage","store",g)},c.prototype.retrieve=function(a,b){var c=this,d=[a,b];cordova.exec(function(){return c.successHandler}(),function(){return c.errorHandler}(),"AWSecureStorage","retrieve",d)},c.prototype.remove=function(a){var b=this,c=[a];cordova.exec(function(){return b.successHandler}(),function(){return b.errorHandler}(),"AWSecureStorage","removeFile",c)},c.prototype.fileExistsAtPath=function(a){var b=this,c=[a];cordova.exec(function(){return b.successHandler}(),function(){return b.errorHandler}(),"AWSecureStorage","fileExistsAtPath",c)},c}(AWPlugin);a.SecureStorage=n;var o=function(a){function b(b,c){a.call(this,b,c),this.fileTransfer=new FileTransfer,this.onprogress=null}return __extends(b,a),b.prototype.abort=function(){this.fileTransfer.abort()},b.prototype.download=function(a,b,c,d){function e(d){(new FileTransfer).download(encodeURI(a),d+"/"+b,g,h,!1,c)}var f=this,g=this.successHandler,h=this.errorHandler;return c=c||{},d?cordova.exec(e,function(){return f.errorHandler}(),"AWSharedDocumentProvider","container",[]):this.fileTransfer.download(encodeURI(a),cordova.file.documentsDirectory+"/"+b,g,h,!1,c),this.fileTransfer},b.prototype.progressHandler=function(a){this.fileTransfer.onprogress=a},b.prototype.upload=function(a,b,c,d){function e(d){(new FileTransfer).upload(d+"/"+a,encodeURI(b),g,h,c,!1)}var f=this,g=this.successHandler,h=this.errorHandler;return c=c||{},d?cordova.exec(e,function(){return f.errorHandler}(),"AWSharedDocumentProvider","container",[]):this.fileTransfer.upload(cordova.file.documentsDirectory+"/"+a,encodeURI(b),g,h,c,!1),this.fileTransfer},b}(AWPlugin);a.AWFileTransfer=o;var p=function(a){function b(){a.apply(this,arguments),this.options=navigator.contacts}return __extends(b,a),b.prototype.create=function(a){return navigator.contacts.create(a)},b.prototype.find=function(a,b){var c=this;navigator.contacts.find(a,function(){return c.successHandler}(),function(){return c.errorHandler}(),b)},b.prototype.pickContact=function(){var a=this;navigator.contacts.pickContact(function(){return a.successHandler}(),function(){return a.errorHandler}())},b}(AWPlugin);a.AWContacts=p;var q=function(a){function b(){a.call(this,function(){},function(){}),this.cordova=device.cordova,this.model=device.model,this.platform=device.platform,this.uuid=device.uuid,this.version=device.version,this.manufacturer=device.manufacturer}return __extends(b,a),b}(AWPlugin);a.AWDevice=q;var r=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getCurrentAcceleration=function(){var a=this;navigator.accelerometer.getCurrentAcceleration(function(){return a.successHandler}(),function(){return a.errorHandler}())},b.prototype.watchAcceleration=function(a){var b=this;return navigator.accelerometer.watchAcceleration(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b.prototype.clearWatch=function(a){navigator.accelerometer.clearWatch(a)},b}(AWPlugin);a.AWAccelerometer=r;var s=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getCurrentHeading=function(){var a=this;navigator.compass.getCurrentHeading(function(){return a.successHandler}(),function(){return a.errorHandler}())},b.prototype.watchHeading=function(a){var b=this;return navigator.compass.watchHeading(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b.prototype.clearWatch=function(a){navigator.compass.clearWatch(a)},b}(AWPlugin);a.AWCompass=s;var t=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.getCurrentPosition=function(a){var b=this;navigator.geolocation.getCurrentPosition(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b.prototype.watchPosition=function(a){var b=this;return navigator.geolocation.watchPosition(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b.prototype.clearWatch=function(a){navigator.geolocation.clearWatch(a)},b}(AWPlugin);a.AWLocation=t;var u=function(a){function b(b,c,d,e){a.call(this,c,d),this.media=new Media(b,c,d,e),this.src=b,this.position=this.media.position,this.duration=this.media.duration}return __extends(b,a),b.prototype.getCurrentPosition=function(a,b){return this.media.getCurrentPosition(a,b)},b.prototype.getDuration=function(){return this.media.getDuration()},b.prototype.pause=function(){return this.media.pause()},b.prototype.play=function(){return this.media.play()},b.prototype.release=function(){return this.media.release()},b.prototype.seekTo=function(){return this.media.seekTo()},b.prototype.setVolume=function(){return this.media.setVolume()},b.prototype.startRecord=function(){return this.media.startRecord()},b.prototype.stop=function(){return this.media.stop()},b.prototype.stopRecord=function(){return this.media.stopRecord()},b}(AWPlugin);a.AWMedia=u;var v=function(a){function b(b,c){a.call(this,b,c),this.supportedAudioModes=navigator.device.capture.supportedAudioModes,this.supportedImageModes=navigator.device.capture.supportedImageModes,this.supportedVideoModes=navigator.device.capture.supportedVideoModes}return __extends(b,a),b.prototype.captureAudio=function(a){var b=this;navigator.device.capture.captureAudio(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b.prototype.captureImage=function(a){var b=this;navigator.device.capture.captureImage(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b.prototype.captureVideo=function(a){var b=this;navigator.device.capture.captureVideo(function(){return b.successHandler}(),function(){return b.errorHandler}(),a)},b}(AWPlugin);a.AWMediaCapture=v;var w=function(a){function b(){a.call(this,function(){},function(){})}return __extends(b,a),b.prototype.alert=function(a,b,c,d){navigator.notification.alert(a,b,c,d)},b.prototype.beep=function(a){navigator.notification.beep(a)},b.prototype.confirm=function(a,b,c,d){navigator.notification.confirm(a,b,c,d)},b.prototype.prompt=function(a,b,c,d,e){navigator.notification.prompt(a,b,c,d,e)},b.prototype.enablePushNotifications=function(a,b){cordova.exec(a,b,"AWNotificationManager","enablePushNotifications",[])},b.prototype.disablePushNotifications=function(){cordova.exec(null,null,"AWNotificationManager","disablePushNotifications",[])},b.prototype.getNotifications=function(a,b){cordova.exec(a,b,"AWNotificationManager","getPushNotifications",[])},b.prototype.getOpeningNotification=function(a,b){cordova.exec(a,b,"AWNotificationManager","getOpeningNotification",[])},b.prototype.openListener=function(a){cordova.exec(a,null,"AWNotificationManager","openListener",[])},b}(AWPlugin);a.AWNotificationManager=w;var x=function(a){function b(){a.call(this,function(){},function(){})}return __extends(b,a),b.prototype.vibrate=function(a){return navigator.vibrate(a)},b}(AWPlugin);a.AWVibration=x;var y=function(a){function b(b){a.call(this,function(){},function(){});var c,d=this;this.cacheKey="__appworksjs.deferredQueue",this.cache=new z,this.options=b||{preserveEvents:!1},document.addEventListener("online",function(){d.processDeferredQueue()}),c=this.cache.getItem(this.cacheKey),c?this.queue=JSON.parse(c):(this.queue=[],this.saveQueue()),this.networkStatus().online&&this.processDeferredQueue()}return __extends(b,a),b.prototype.saveQueue=function(){this.cache.setItem(this.cacheKey,JSON.stringify(this.queue))},b.prototype.processDeferredQueue=function(){var a=this;console.info("appworks.js: processing deferred queue"),setTimeout(function(){a.queue.forEach(function(b){a.dispatchEvent(b)}),a.options.preserveEvents||(a.queue=[],a.saveQueue())},5e3)},b.prototype.dispatchEvent=function(a){var b=new CustomEvent(a.event,{detail:a.args});document.dispatchEvent(b)},b.prototype.defer=function(a,b){return this.queue.push({event:a,args:JSON.stringify(b)}),this.saveQueue(),this.queue.length-1},b.prototype.cancel=function(a){a>-1&&(this.queue.splice(a,1),this.saveQueue())},b.prototype.networkStatus=function(){return{online:navigator.connection.type!==Connection.NONE,offline:navigator.connection.type===Connection.NONE,connection:navigator.connection}},b}(AWPlugin);a.AWOfflineManager=y;var z=function(a){function b(b){a.call(this,function(){},function(){}),this.options=b||{usePersistentStorage:!1},this.options.usePersistentStorage&&this.loadPersistentDataIntoLocalStorage()}return __extends(b,a),b.prototype.readDataFromPersistentStorage=function(a,b){function c(a){a.root.getFile("appworksjs.cache.json",{create:!0,exclusive:!1},d,g)}function d(a){a.file(e,g)}function e(a){f(a)}function f(b){var c=new FileReader;c.onloadend=function(b){console.log(b),a(b.target.result)},c.readAsText(b)}var g=function(a){console.error(a.code)};"function"==typeof b&&(g=b),"function"!=typeof a&&(a=function(){}),window.requestFileSystem(LocalFileSystem.PERSISTENT,0,c,g)},b.prototype.writeLocalStorageDataToPersistentStorage=function(){var a,b,c,d={};for(a=0;a<window.localStorage.length;a+=1)b=window.localStorage.key(a),c=window.localStorage.getItem(b),d[b]=c;this.writeDataToPersistentStorage(JSON.stringify(d))},b.prototype.writeDataToPersistentStorage=function(a){function b(a){a.root.getFile("appworksjs.cache.json",{create:!0,exclusive:!1},c,e)}function c(a){a.createWriter(d,e)}function d(b){b.onwriteend=function(){console.info("cache data backed up successfully")},b.write(a)}function e(a){console.log(a.code)}window.requestFileSystem(LocalFileSystem.PERSISTENT,0,b,e)},b.prototype.loadPersistentDataIntoLocalStorage=function(){this.readDataFromPersistentStorage(function(a){var b;if(a){b=JSON.parse(a);for(var c in b)window.localStorage.setItem(c,b[c])}})},b.prototype.setItem=function(a,b){var c=window.localStorage.setItem(a,b);return this.options.usePersistentStorage&&this.writeLocalStorageDataToPersistentStorage(),c},b.prototype.getItem=function(a){var b=window.localStorage.getItem(a);return b},b.prototype.removeItem=function(a){var b=window.localStorage.removeItem(a);return this.options.usePersistentStorage&&this.writeLocalStorageDataToPersistentStorage(),b},b.prototype.clear=function(){var a=window.localStorage.clear();return this.options.usePersistentStorage&&this.writeLocalStorageDataToPersistentStorage(),a},b}(AWPlugin);a.AWCache=z}(Appworks||(Appworks={}));